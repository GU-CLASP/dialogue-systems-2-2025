<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="394px" preserveAspectRatio="none" style="width:599px;height:394px;background:#FFFFFF;" version="1.1" viewBox="0 0 599 394" width="599px" zoomAndPan="magnify"><defs/><g><path d="M19.5,7 L573.1284,7 A12.5,12.5 0 0 1 585.6284,19.5 L585.6284,52.6211 L7,52.6211 L7,19.5 A12.5,12.5 0 0 1 19.5,7" fill="#F1F1F1" style="stroke:#F1F1F1;stroke-width:1;"/><rect fill="none" height="381.4822" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="578.6284" x="7" y="7"/><line style="stroke:#181818;stroke-width:0.5;" x1="7" x2="585.6284" y1="52.6211" y2="52.6211"/><line style="stroke:#181818;stroke-width:0.5;" x1="7" x2="585.6284" y1="33.4883" y2="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.4756" x="279.5764" y="25.5352">Loop</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="35.1914" x="12" y="45.0898">entry:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="227.0391" x="50.9883" y="45.0898">/append("&lt;your_greeting&gt;",messages)</text><ellipse cx="298.33" cy="73.6211" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><g id="Loop.Speaking"><rect fill="#F1F1F1" height="50.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="171.541" x="212.56" y="120.6211"/><line style="stroke:#181818;stroke-width:0.5;" x1="212.56" x2="384.101" y1="147.1094" y2="147.1094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.5303" x="267.5654" y="139.1563">Speaking</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="35.1914" x="217.56" y="163.7109">entry:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="112.5527" x="256.5483" y="163.7109">speak(lastMessage)</text></g><g id="Loop.ChatCompletion"><rect fill="#F1F1F1" height="50.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="166.8535" x="137.91" y="327.8611"/><line style="stroke:#181818;stroke-width:0.5;" x1="137.91" x2="304.7635" y1="354.3494" y2="354.3494"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.9287" x="166.3724" y="346.3963">ChatCompletion</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="146.8535" x="142.91" y="370.9509">invoke(generateGreeting)</text></g><g id="Loop.Ask"><rect fill="#F1F1F1" height="50.6211" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="90.6641" x="19" y="224.2411"/><line style="stroke:#181818;stroke-width:0.5;" x1="19" x2="109.6641" y1="250.7294" y2="250.7294"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24.9785" x="51.8428" y="242.7763">Ask</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="35.1914" x="24" y="267.3309">entry:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="31.6758" x="62.9883" y="267.3309">listen</text></g><!--link *start*Loop to Speaking--><g class="link" data-entity-1="*start*Loop" data-entity-2="Speaking" data-source-line="2" data-uid="lnk4" id="link_*start*Loop_Speaking"><path d="M298.33,84.1011 C298.33,93.3211 298.33,101.7211 298.33,114.2011" fill="none" id="*start*Loop-to-Speaking" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="298.33,120.2011,302.33,111.2011,298.33,115.2011,294.33,111.2011,298.33,120.2011" style="stroke:#181818;stroke-width:1;"/></g><!--link ChatCompletion to Speaking--><g class="link" data-entity-1="ChatCompletion" data-entity-2="Speaking" data-source-line="4" data-uid="lnk6" id="link_ChatCompletion_Speaking"><path d="M290.28,327.4111 C313.6,315.3411 337.08,298.2611 350.33,274.8611 C369.71,240.6511 346.7353,202.4018 324.9753,175.9918" fill="none" id="ChatCompletion-to-Speaking" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="321.16,171.3611,323.7959,180.8507,324.3395,175.22,329.9701,175.7635,321.16,171.3611" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49.0864" x="439.781" y="247.1195">onDone</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.4951" x="362.1333" y="262.43">\append(event.output,messages)</text></g><!--link Speaking to Ask--><g class="link" data-entity-1="Speaking" data-entity-2="Ask" data-source-line="6" data-uid="lnk8" id="link_Speaking_Ask"><path d="M241.39,171.6611 C201.07,189.1611 153.2137,209.9518 115.6437,226.2618" fill="none" id="Speaking-to-Ask" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="110.14,228.6511,119.9885,228.7363,114.7265,226.66,116.8028,221.398,110.14,228.6511" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.9092" x="196.34" y="202.8095">SPEAK_COMPLETE</text></g><!--link Ask to Ask--><g class="link" data-entity-1="Ask" data-entity-2="Ask" data-source-line="8" data-uid="lnk9" id="link_Ask_Ask"><path d="M110.16,240.1011 C120.29,240.9811 127.66,244.1311 127.66,249.5511 C127.66,254.9611 126.267,257.586 116.137,258.476" fill="none" id="Ask-to-Ask" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="110.16,259.0011,119.4755,262.1981,115.1408,258.5635,118.7754,254.2288,110.16,259.0011" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.8882" x="194.388" y="247.1195">RECOGNISED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.3442" x="133.66" y="262.43">/append(event.result,messages)</text></g><!--link Ask to ChatCompletion--><g class="link" data-entity-1="Ask" data-entity-2="ChatCompletion" data-source-line="9" data-uid="lnk10" id="link_Ask_ChatCompletion"><path d="M102.34,275.1511 C126.84,291.0111 153.5527,308.3014 178.0927,324.1814" fill="none" id="Ask-to-ChatCompletion" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="183.13,327.4411,177.7472,319.1934,178.9322,324.7247,173.4009,325.9098,183.13,327.4411" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.7686" x="153.23" y="306.4295">LISTEN_COMPLETE</text></g><!--SRC=[PP1FQy904CNlVeh1KxhKzXwA874HQVn3uwqfij1X6n9dbfsD8ANVlHkjnDJhczzxRtWIJ438cHryZm3UrGTC9bCe79gw8XkbxCk4Z0-kmL0nfL3HaMjCB1Bww5ruZ0Uo3tVe82W5fZaJbWHbQPn3-apmY1IUk0sk3Oy7534MfSlfJKf5n9zIfK0wCMcCXDK5lINFNJEfKoYsUlQwppQhRQvtEY9dzIQdgIGWNGwzxKrdcyLwMUXvIS-3_pnAsmp_kph_JvClYvrUz-K_esxOGVirU_noujRlxTzwqt5Vy0i0]--></g></svg>